<!DOCTYPE html>
<!--<script type="text/javascript" src="dbConnection.js"></script>-->
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>

<p id="p" onclick="showDBEntry()">Click me </p>

<script>
    let trading;
    var Pool;
    var pool;

    function showDBEntry() {

        console.log("showDBEntry start");

        var config = {
            host: 'ec2-54-247-70-127.eu-west-1.compute.amazonaws.com',
            user: 'mtqjbarwkwzsld',
            password: '2b51f440930a3711f9cabf9884d82feda3b70e9b35c9e9fb2d5f6f989fef445a',
            database: 'dd786fen583a5s',
            ssl: true
        };

        Pool = require('pg').Pool;
        pool = new Pool(config);

        var newID = get_IDandIncrease()
        var paragraph = document.getElementById("p");
        paragraph.textContent += newID + " <--new ID from function  -  trading, global variable -->" + trading;
    }


    async function get_items() {
        var response = await pool.query("select * from customer ORDER BY c_id desc");
        console.log(response.rows);
        return response.rows;
    }

    async function get_IDandIncrease() {
        var highestCustomerID = await pool.query({
            rowMode: 'array',
            text: "select c_id from customer ORDER BY c_id desc"
        });
        var newID = parseInt(highestCustomerID.rows[0]) + 1;
        console.log(newID);
        return newID;
    }


</script>

</body>
</html>